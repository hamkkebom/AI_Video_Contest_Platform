<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="doc-version" content="v0.1-mockup">
  <meta name="doc-status" content="ëª©ì—… ê¸°ì¤€ ì´ˆì•ˆ">
  <meta name="last-modified" content="2026-02-19">
  <meta name="project" content="í•¨ê»˜ë´„ AI ì˜ìƒ ê³µëª¨ì „ í”Œë«í¼">
  <title>API ëª…ì„¸ì„œ - í•¨ê»˜ë´„ AI ì˜ìƒ ê³µëª¨ì „ í”Œë«í¼</title>
  <link rel="stylesheet" href="../assets/style.css">
  <link rel="stylesheet" href="../assets/print.css">
</head>
<body>
  <main>
    <h1>ğŸ”Œ API ëª…ì„¸ì„œ</h1>
    <p><code>lib/mock/index.ts</code>ì˜ async í•¨ìˆ˜ë¥¼ REST ì—”ë“œí¬ì¸íŠ¸ë¡œ ì •ê·œí™”í•œ ëª©ì—… ê¸°ì¤€ ëª…ì„¸ë‹¤.</p>
    <button id="pdf-button" class="pdf-button" type="button">ğŸ“„ PDF ë‹¤ìš´ë¡œë“œ</button>
    <div class="doc-meta">
      <strong>ë¬¸ì„œ ì •ë³´:</strong> v0.1-mockup | ìµœì¢… ìˆ˜ì •: 2026-02-19 | ìƒíƒœ: ëª©ì—… ê¸°ì¤€ ì´ˆì•ˆ
    </div>

    <h2>1. ì¸ì¦ ë°©ì‹</h2>
    <table>
      <thead>
        <tr>
          <th>í•­ëª©</th>
          <th>ì •ì˜</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Auth</td><td>Supabase Auth JWT (Bearer í† í°)</td></tr>
        <tr><td>Header</td><td><code>Authorization: Bearer &lt;jwt&gt;</code></td></tr>
        <tr><td>ê¶Œí•œ</td><td>role ê¸°ë°˜ ì ‘ê·¼ì œì–´(guest/participant/host/judge/admin)</td></tr>
      </tbody>
    </table>

    <h2>2. ì—ëŸ¬ ì½”ë“œ ì²´ê³„</h2>
    <table>
      <thead>
        <tr>
          <th>HTTP</th>
          <th>code</th>
          <th>ì˜ë¯¸</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>400</td><td>BAD_REQUEST</td><td>ìš”ì²­ íŒŒë¼ë¯¸í„°/ë°”ë”” í˜•ì‹ ì˜¤ë¥˜</td></tr>
        <tr><td>401</td><td>UNAUTHORIZED</td><td>JWT ëˆ„ë½ ë˜ëŠ” ë§Œë£Œ</td></tr>
        <tr><td>403</td><td>FORBIDDEN</td><td>ì—­í•  ê¶Œí•œ ë¶€ì¡±</td></tr>
        <tr><td>404</td><td>NOT_FOUND</td><td>ë¦¬ì†ŒìŠ¤ ë¯¸ì¡´ì¬</td></tr>
        <tr><td>409</td><td>CONFLICT</td><td>ì¤‘ë³µ ì¢‹ì•„ìš”/ì¤‘ë³µ ì±„ì  ë“± ì¶©ëŒ</td></tr>
        <tr><td>500</td><td>INTERNAL_ERROR</td><td>ì„œë²„ ì˜ˆì™¸</td></tr>
      </tbody>
    </table>
    <p>ê³µí†µ ì—ëŸ¬ ì‘ë‹µ í¬ë§·: <code>{ "error": { "code": "...", "message": "...", "details": {} } }</code></p>

    <h2>3. í˜ì´ì§€ë„¤ì´ì…˜ ì „ëµ</h2>
    <table>
      <thead>
        <tr>
          <th>ë°©ì‹</th>
          <th>ì¿¼ë¦¬</th>
          <th>ì ìš© API</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Offset</td><td><code>?offset=0&amp;limit=20</code></td><td>users, contests, submissions, articles</td></tr>
        <tr><td>Cursor</td><td><code>?cursor=2026-02-01T00:00:00.000Z&amp;limit=20</code></td><td>activity_logs, ip_logs, inquiries</td></tr>
      </tbody>
    </table>

    <h2>4. ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ (19ê°œ)</h2>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>í•¨ìˆ˜</th>
          <th>Method</th>
          <th>Path</th>
          <th>Request</th>
          <th>Response</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>API-001</td><td>getUsers</td><td>GET</td><td>/api/users</td><td>query: offset,limit</td><td>User[]</td><td>200,401,500</td></tr>
        <tr><td>API-002</td><td>getDevices</td><td>GET</td><td>/api/devices</td><td>query: offset,limit</td><td>Device[]</td><td>200,401,500</td></tr>
        <tr><td>API-003</td><td>getDevicesByUser</td><td>GET</td><td>/api/users/{userId}/devices</td><td>path: userId</td><td>Device[]</td><td>200,401,404,500</td></tr>
        <tr><td>API-004</td><td>getContests</td><td>GET</td><td>/api/contests</td><td>query: status,region,search,offset,limit</td><td>Contest[]</td><td>200,400,500</td></tr>
        <tr><td>API-005</td><td>getSubmissions</td><td>GET</td><td>/api/submissions</td><td>query: contestId,userId,status,search,offset,limit</td><td>Submission[]</td><td>200,400,500</td></tr>
        <tr><td>API-006</td><td>getLikes</td><td>GET</td><td>/api/likes</td><td>query: submissionId(optional)</td><td>Like[]</td><td>200,401,500</td></tr>
        <tr><td>API-007</td><td>toggleLike</td><td>POST</td><td>/api/submissions/{submissionId}/likes/toggle</td><td>body: { userId }</td><td>{ liked, totalLikes }</td><td>200,400,401,404,409,500</td></tr>
        <tr><td>API-008</td><td>getArticles</td><td>GET</td><td>/api/articles</td><td>query: type,offset,limit</td><td>Article[]</td><td>200,400,500</td></tr>
        <tr><td>API-009</td><td>getFaqs</td><td>GET</td><td>/api/faqs</td><td>query: category</td><td>FAQ[]</td><td>200,400,500</td></tr>
        <tr><td>API-010</td><td>getInquiries</td><td>GET</td><td>/api/inquiries</td><td>query: status,userId,cursor,limit</td><td>Inquiry[]</td><td>200,401,403,500</td></tr>
        <tr><td>API-011</td><td>getAgencyRequests</td><td>GET</td><td>/api/agency-requests</td><td>query: status,cursor,limit</td><td>AgencyRequest[]</td><td>200,401,403,500</td></tr>
        <tr><td>API-012</td><td>getJudgingTemplates</td><td>GET</td><td>/api/judging-templates</td><td>none</td><td>JudgingTemplate[]</td><td>200,401,500</td></tr>
        <tr><td>API-013</td><td>getJudges</td><td>GET</td><td>/api/judges</td><td>query: contestId</td><td>Judge[]</td><td>200,401,403,500</td></tr>
        <tr><td>API-014</td><td>getScores</td><td>GET</td><td>/api/scores</td><td>query: submissionId,judgeId,contestId</td><td>Score[]</td><td>200,401,403,500</td></tr>
        <tr><td>API-015</td><td>getContestResults</td><td>GET</td><td>/api/contest-results</td><td>query: contestId</td><td>ContestResult[]</td><td>200,400,404,500</td></tr>
        <tr><td>API-016</td><td>getActivityLogs</td><td>GET</td><td>/api/activity-logs</td><td>query: userId,targetType,targetId,cursor,limit</td><td>ActivityLog[]</td><td>200,401,403,500</td></tr>
        <tr><td>API-017</td><td>getIpLogs</td><td>GET</td><td>/api/ip-logs</td><td>query: userId,riskLevel,cursor,limit</td><td>IpLog[]</td><td>200,401,403,500</td></tr>
        <tr><td>API-018</td><td>searchMockData</td><td>GET</td><td>/api/search</td><td>query: query,tab</td><td>SearchResult</td><td>200,400,500</td></tr>
        <tr><td>API-019</td><td>getMockDataCounts</td><td>GET</td><td>/api/admin/mock-data-counts</td><td>none</td><td>Record&lt;string,number&gt;</td><td>200,401,403,500</td></tr>
      </tbody>
    </table>

    <h2>5. ìš”ì²­/ì‘ë‹µ ìƒì„¸ í¬ë§·</h2>
    <h3>5.1 ê²€ìƒ‰ API (API-018)</h3>
    <table>
      <thead>
        <tr>
          <th>êµ¬ë¶„</th>
          <th>ë‚´ìš©</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Request Query</td><td><code>query: string (required), tab: all|contests|submissions|creators|articles (optional)</code></td></tr>
        <tr><td>Response 200</td><td><code>{ contests: Contest[], submissions: Submission[], users: User[], articles: Article[] }</code></td></tr>
        <tr><td>Response 400</td><td><code>{ error: { code: "BAD_REQUEST", message: "query is required" } }</code></td></tr>
      </tbody>
    </table>

    <h3>5.2 ì¢‹ì•„ìš” í† ê¸€ API (API-007)</h3>
    <table>
      <thead>
        <tr>
          <th>êµ¬ë¶„</th>
          <th>ë‚´ìš©</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Request Body</td><td><code>{ "userId": "user-1" }</code></td></tr>
        <tr><td>Response 200</td><td><code>{ "liked": true, "totalLikes": 31 }</code></td></tr>
        <tr><td>Response 404</td><td><code>{ error: { code: "NOT_FOUND", message: "submission not found" } }</code></td></tr>
      </tbody>
    </table>

    <h2>6. ìƒíƒœ ì½”ë“œ ìš´ì˜ ê·œì¹™</h2>
    <ul>
      <li>ì¡°íšŒ ê³„ì—´ APIëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <code>200</code>ê³¼ í‘œì¤€ ì—ëŸ¬(<code>400/401/403/500</code>)ë¥¼ ì‚¬ìš©í•œë‹¤.</li>
      <li>ë¦¬ì†ŒìŠ¤ ì‹ë³„ì´ í•„ìš”í•œ ê²½ë¡œ íŒŒë¼ë¯¸í„° APIëŠ” <code>404</code>ë¥¼ ì¶”ê°€í•œë‹¤.</li>
      <li>í† ê¸€/ìƒì„± ê³„ì—´ì—ì„œ ì¤‘ë³µ ì¡°ê±´ ìœ„ë°˜ ì‹œ <code>409 CONFLICT</code>ë¥¼ ë°˜í™˜í•œë‹¤.</li>
    </ul>
  </main>
  <script src="../assets/docs.js" defer></script>
</body>
</html>
